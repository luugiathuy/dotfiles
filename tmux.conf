###########################
#  Configuration
###########################

# Ring the bell if any background window rang a bell
set -g bell-action any

# use 256 term for pretty colors
set -g default-terminal "screen-256color"

# increase scroll-back history
set -g history-limit 5000

# Use vi keybindings for tmux commandline input.
# Note that to get command mode you need to hit ESC twice...
set -g status-keys vi

# use vim key bindings
setw -g mode-keys vi

# enable mouse mode
set -g mouse on
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'select-pane -t=; copy-mode -e; send-keys -M'"
bind -n WheelDownPane select-pane -t= \; send-keys -M

# decrease command delay (increases vim responsiveness)
set -sg escape-time 1

# increase repeat time for repeatable commands
set -g repeat-time 1000

# re-number windows when one is closed
set -g renumber-windows on

# enable pbcopy and pbpaste
# https://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard/blob/master/README.md
set-option -g default-command "reattach-to-user-namespace -l zsh"

###########################
#  Key Bindings
###########################

# tmux prefix
unbind C-b
set -g prefix C-a

# copy with 'y' and send to clipboard
bind-key -Tcopy-mode-vi 'y' send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"

# resize panes
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# force a reload of the config kile
unbind r
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# Enable screen-like C-a C-a moving to last window
bind-key C-a last-window

# Go to beginning of line
bind a send-prefix

###########################
# Status Bar
###########################

# set refresh interval for status bar
set -g status-interval 30

# position the status bar
set -g status-justify left

# color status bar
set -g status-style 'fg=white bg=colour235'

# set -g status-left ''
set -g status-right '#H #[fg=colour233,bg=green] %a %d %b #[fg=colour233,bg=cyan] %H:%M '
set -g status-right-length 50
set -g status-left-length 20

###########################
# Colors
###########################

# highlight current window
set-window-option -g window-status-current-style 'fg=black bg=green'

# set color of active pane
set -g pane-border-style 'fg=colour235 bg=black'
set -g pane-active-border-style 'fg=green bg=black'

# List of plugins
# Supports `github_username/repo` or full git URLs
set -g @tpm_plugins "              \
	tmux-plugins/tpm                 \
	tmux-plugins/tmux-sensible       \
	tmux-plugins/tmux-resurrect      \
"
# Other examples:
# github_username/plugin_name    \
# git@github.com/user/plugin     \
# git@bitbucket.com/user/plugin  \

# initializes TMUX plugin manager
run-shell ~/.tmux/plugins/tpm/tpm

set -g @resurrect-strategy-vim "session"
